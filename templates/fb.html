{% extends 'base.html' %}

{% block body %}
<div class="container text-center">
	<p> &nbsp; </p>
	<p> &nbsp; </p>
	<p> &nbsp; </p>

	<p class="lead text-center"> Evolution of events on facebook </p>
	<p> &nbsp; </p>
	<p> &nbsp; </p>

	<div class="panel panel-primary">
	  <div class="panel-heading" style="background:#3b5998"><strong>Facebook Page: <span style="color:black"></span></strong></div>
		<div class="panel-body">

			{% for post_id, comments in tlist.items() %}
						<div class="fb-post" data-href="https://www.facebook.com/{{ page_name_or_id }}/posts/{{ post_id }}" data-width="750"></div>
						
						<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
								<div class="panel panel-default" style="width:750px; margin:0 auto;">
									<div class="panel-heading" role="tab" id="headingOne" style="background:white">
									  <h4 class="panel-title">
										<a role="button" data-toggle="collapse" data-parent="#accordion" href="#{{ post_id }}" aria-expanded="true" aria-controls="collapseOne">
										  <strong>Comments</strong>
										  <span class="glyphicon glyphicon-triangle-right pull-right" aria-hidden="true"></span>
										</a>
									  </h4>
									</div>
									<div id="{{ post_id }}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
											<div class="panel-body">
												<div id='comments' style='height:280px; overflow:hidden; overflow-y:scroll;'>
														<div id="appendHere">
															{% for comment in comments %}
																<div class="fb-comment-embed" data-href="https://www.facebook.com/{{ page_name_or_id }}/posts/{{ post_id }}?comment_id={{ comment }}" data-width="715"></div>
															{% endfor %}
														</div>
														<p id="loading">
															<button class="btn btn-md btn-link"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Loading...</button>
														</p>
												</div>
											</div>
									</div>
								</div>
						</div>
			{% endfor %}
		</div>
	</div>

</div>
{% endblock %}

{% block head %}
<script>
$(document).ready(function() {
    $(".collpase").collapse();
	
});
</script>

<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.7&appId=1809279415952188";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>
<!--
<script>

$(function() {
$('a').click(function() {
	$('#loading').show();
	appendComment();
	$('#loading').hide();
	});
});
var appendComment = function () {
	$('#appendHere').append('Comments will be appended here ');
	$('#appendHere').append('{% for comment in comments %}');
	$('#appendHere').append('<div class="fb-comment-embed" data-href="https://www.facebook.com/{{ page_name_or_id }}/posts/{{ post_id }}?comment_id={{ comment }}" data-width="715"></div>');
	$('#appendHere').append('{% endfor %}');
}
</script>
<script>

	$(function() {
    $('button').click(function() {
        var user = $('#txtUsername').val();
        var pass = $('#txtPassword').val();
        $.ajax({
            url: '/signUpUser',
            data: $('form').serialize(),
            type: 'POST',
            success: function(response) {
                console.log(response);
            },
            error: function(error) {
                console.log(error);
            }
        });
    });
});

</script> -->



<style>
	.glyphicon-refresh-animate {
    -animation: spin .7s infinite linear;
    -webkit-animation: spin2 .7s infinite linear;
}

@-webkit-keyframes spin2 {
    from { -webkit-transform: rotate(0deg);}
    to { -webkit-transform: rotate(360deg);}
}
</style>

{% endblock %}
